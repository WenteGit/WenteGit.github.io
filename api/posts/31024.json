{"title":"Mabtis && MybatisPlus","slug":"TechStack-MybatisPlus","date":"2022-07-21","updated":"2023-11-06","comments":true,"path":"api/posts/31024.json","excerpt":"<blockquote><p> 总结了 Mabtis 和 plus 的一些小细节的知识 </p></blockquote>","cover":null,"covers":null,"content":"<blockquote>\n<p>总结了 Mabtis 和 plus 的一些小细节的知识</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h1 id=\"Mabatis-amp-amp-Plus- 小知识总结\"><a href=\"#Mabatis-amp-amp-Plus- 小知识总结\" class=\"headerlink\" title=\"Mabatis&amp;&amp;Plus 小知识总结\"></a>Mabatis&amp;&amp;Plus 小知识总结</h1><h2 id=\"type-aliases-package\"><a href=\"#type-aliases-package\" class=\"headerlink\" title=\"type-aliases-package\"></a>type-aliases-package</h2><h3 id=\"type-aliases-package 作用\"><a href=\"#type-aliases-package 作用\" class=\"headerlink\" title=\"type-aliases-package 作用\"></a>type-aliases-package 作用</h3><blockquote>\n<p>在 Mybatis 的 mapper.xml 文件中 resultType 的 type 或者 paramterType 会返回自定义 entity<br>此时可以用全类名名来指定这些实体。</p>\n</blockquote>\n<h3 id=\"type-aliases-package 配置\"><a href=\"#type-aliases-package 配置\" class=\"headerlink\" title=\"type-aliases-package 配置\"></a>type-aliases-package 配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mybatis:</span></span><br><span class=\"line\">    <span class=\"string\">type-aliases-package=xtzl.ljw.entities</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"指定 Mapper 路径\"><a href=\"# 指定 Mapper 路径\" class=\"headerlink\" title=\"指定 Mapper 路径\"></a>指定 Mapper 路径</h2><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mybatis:</span></span><br><span class=\"line\">    <span class=\"attr\">mapper-locations:</span> <span class=\"string\">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"useGeneratedKeys\"><a href=\"#useGeneratedKeys\" class=\"headerlink\" title=\"useGeneratedKeys\"></a>useGeneratedKeys</h2><blockquote>\n<p>在使用 useGeneratedKeys=”true”后返回值是 1，期待返回实体主键 <br>insert 方法返回值依然是修改行数<br> 需要从传入的实体中取对应属性值。  </p>\n</blockquote>\n<p>比如 user 表对应 User 类，主键是 id<br>那么 int i =insertUser（user）;<br>方法执行后 i 还是 1</p>\n<p>但是 user.getId(); 得到的值就是主键了</p>\n<blockquote>\n<hr>\n<p>一般来说需要和 keyProperty=”id” 联用，意为指定主键</p>\n</blockquote>\n<h1 id=\"MybatisPlus 配置\"><a href=\"#MybatisPlus 配置\" class=\"headerlink\" title=\"MybatisPlus 配置\"></a>MybatisPlus 配置 </h1><h2 id=\"接口配置\"><a href=\"# 接口配置\" class=\"headerlink\" title=\"接口配置\"></a> 接口配置</h2><h3 id=\"Mapper 父类\"><a href=\"#Mapper 父类\" class=\"headerlink\" title=\"Mapper 父类\"></a>Mapper 父类</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Mapper</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">stuTeaMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;StuTea&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Service 父类接口\"><a href=\"#Service 父类接口\" class=\"headerlink\" title=\"Service 父类接口\"></a>Service 父类接口</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">StuTeaService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;StuTea&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Service 父类实体\"><a href=\"#Service 父类实体\" class=\"headerlink\" title=\"Service 父类实体\"></a>Service 父类实体</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">StuTeaServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;stuTeaMapper,StuTea&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">StuTeaService</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<hr>\n</blockquote>\n<h2 id=\"yml 配置\"><a href=\"#yml 配置\" class=\"headerlink\" title=\"yml 配置\"></a>yml 配置</h2><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># mybatis_plus 配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">mapper-locations:</span> <span class=\"string\">classpath:/mapper/*.xml</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\"># 将数据库的带下划线给去掉然后映射到实体类的属性上去</span></span><br><span class=\"line\">    <span class=\"attr\">map-underscore-to-camel-case:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\"># 可返回自增长的主键</span></span><br><span class=\"line\">    <span class=\"attr\">use-generated-keys:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"MybatisPlus 方法总结\"><a href=\"#MybatisPlus 方法总结\" class=\"headerlink\" title=\"MybatisPlus 方法总结\"></a>MybatisPlus 方法总结 </h1><h2 id=\"方法总图\"><a href=\"# 方法总图\" class=\"headerlink\" title=\"方法总图\"></a> 方法总图</h2><img src = \"http://xtzl.wentexl.cn/mybatisPlus%E5%B0%81%E8%A3%85%E5%87%BD%E6%95%B0.png\"/>\n\n<h2 id=\"QueryWrpper\"><a href=\"#QueryWrpper\" class=\"headerlink\" title=\"QueryWrpper\"></a>QueryWrpper</h2><blockquote>\n<ul>\n<li>allEq(Map params,null2isNull)，其中的 null2isNull 的意思是，如果 Map 参数集合里有参数的值为 null，那在实际 sql 中是强制这个字段为 Null，或者是忽略这个字段的判断条件</li>\n<li>nested()</li>\n</ul>\n</blockquote>\n<h2 id=\"UpdateWrapper\"><a href=\"#UpdateWrapper\" class=\"headerlink\" title=\"UpdateWrapper\"></a>UpdateWrapper</h2>","url":"/posts/31024/","min2read":1,"word4post":376,"prev_post":{"title":"Configuration_header","url":"/posts/65104/"},"next_post":{"title":"JavaNorms","url":"/posts/17711/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"Mabatis-amp-amp-Plus- 小知识总结\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">Mabatis&amp;&amp;Plus 小知识总结</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"type-aliases-package\" href = \"#\"><span class=\"toc-number\">1.1.</span> <span class=\"toc-text\">type-aliases-package</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"type-aliases-package 作用\" href = \"#\"><span class=\"toc-number\">1.1.1.</span> <span class=\"toc-text\">type-aliases-package 作用</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"type-aliases-package 配置\" href = \"#\"><span class=\"toc-number\">1.1.2.</span> <span class=\"toc-text\">type-aliases-package 配置</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"指定 Mapper 路径\" href = \"#\"><span class=\"toc-number\">1.2.</span> <span class=\"toc-text\">指定 Mapper 路径</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"useGeneratedKeys\" href = \"#\"><span class=\"toc-number\">1.3.</span> <span class=\"toc-text\">useGeneratedKeys</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"MybatisPlus 配置\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">MybatisPlus 配置 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"接口配置\" href = \"#\"><span class=\"toc-number\">2.1.</span> <span class=\"toc-text\"> 接口配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"Mapper 父类\" href = \"#\"><span class=\"toc-number\">2.1.1.</span> <span class=\"toc-text\">Mapper 父类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"Service 父类接口\" href = \"#\"><span class=\"toc-number\">2.1.2.</span> <span class=\"toc-text\">Service 父类接口</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"Service 父类实体\" href = \"#\"><span class=\"toc-number\">2.1.3.</span> <span class=\"toc-text\">Service 父类实体</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"yml 配置\" href = \"#\"><span class=\"toc-number\">2.2.</span> <span class=\"toc-text\">yml 配置</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"MybatisPlus 方法总结\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">MybatisPlus 方法总结 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"方法总图\" href = \"#\"><span class=\"toc-number\">3.1.</span> <span class=\"toc-text\"> 方法总图</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"QueryWrpper\" href = \"#\"><span class=\"toc-number\">3.2.</span> <span class=\"toc-text\">QueryWrpper</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"UpdateWrapper\" href = \"#\"><span class=\"toc-number\">3.3.</span> <span class=\"toc-text\">UpdateWrapper</span></a></li></ol></li></ol>","categories":[{"name":"TechStack","path":"api/categories/TechStack.json","url":"/categories/TechStack/"}],"tags":[{"name":"Mabtis","path":"api/tags/Mabtis.json","url":"/tags/Mabtis/"}]}