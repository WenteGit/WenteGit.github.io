{"title":"MQ-RabbitMQ","slug":"MQ-RabbitMQ","date":"2023-01-25","updated":"2023-01-29","comments":true,"path":"api/posts/15185.json","excerpt":"<blockquote><p> 关于 RabbitMQ 的知识点积累 </p></blockquote>","cover":"http://xtzl.wentexl.cn/wq.png","covers":["http://xtzl.wentexl.cn/wq.png","http://xtzl.wentexl.cn/emq.png","http://xtzl.wentexl.cn/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%9C%BA.png","http://xtzl.wentexl.cn/Topic%E9%80%9A%E9%85%8D%E7%AC%A6%E6%96%B9%E5%BC%8F.png"],"content":"<blockquote>\n<p>关于 RabbitMQ 的知识点积累</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"架构图\"><a href=\"# 架构图\" class=\"headerlink\" title=\"架构图\"></a>架构图</h1><img src = \"http://xtzl.wentexl.cn/rabbitMQ.png\">\n\n<h1 id=\"工作模式 - 五种\"><a href=\"# 工作模式 - 五种\" class=\"headerlink\" title=\"工作模式 (五种)\"></a> 工作模式(五种)</h1><h2 id=\"Simple 简单模式\"><a href=\"#Simple 简单模式\" class=\"headerlink\" title=\"Simple 简单模式\"></a>Simple 简单模式</h2><blockquote>\n<p>一个生产者，一个队列，一个消费者的模式</p>\n</blockquote>\n<h2 id=\"Work-queues 工作队列模式\"><a href=\"#Work-queues 工作队列模式\" class=\"headerlink\" title=\"Work queues 工作队列模式\"></a>Work queues 工作队列模式</h2><blockquote>\n<p>多个消费端共同处理同一个队列中的消息 <br> 对于任务过重或者任务较多的情况使用,C1 和 C2 的轮询获取的，同一个消息只能被其中一个获取到<br><img src=\"http://xtzl.wentexl.cn/wq.png\"/></p>\n</blockquote>\n<h2 id=\"Pub-Sub- 订阅模式\"><a href=\"#Pub-Sub- 订阅模式\" class=\"headerlink\" title=\"Pub/Sub 订阅模式\"></a>Pub/Sub 订阅模式</h2><img src=\"http://xtzl.wentexl.cn/emq.png\"/>\n\n<h2 id=\"Routing 路由模式\"><a href=\"#Routing 路由模式\" class=\"headerlink\" title=\"Routing 路由模式\"></a>Routing 路由模式</h2><blockquote>\n<p>交换机只将消息发送给指定路由 key 的消息队列中去<br><img src=\"http://xtzl.wentexl.cn/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%9C%BA.png\"/></p>\n</blockquote>\n<h2 id=\"Topic 通配符方式\"><a href=\"#Topic 通配符方式\" class=\"headerlink\" title=\"Topic 通配符方式\"></a>Topic 通配符方式</h2><blockquote>\n<p>批量匹配之后将消息发送到对应消息队列中<br><img src=\"http://xtzl.wentexl.cn/Topic%E9%80%9A%E9%85%8D%E7%AC%A6%E6%96%B9%E5%BC%8F.png\"></p>\n</blockquote>\n<ul>\n<li>topic 中 #和 * 的区别<blockquote>\n<p>符号“#”匹配路由键的一个或多个词，符号’<em>‘只匹配路由键的一个词。<br>例如：topic.# 那么这个队列会会接收 topic 开头的消息，topic.</em>.queue 那么这个队列会接收 topic.aaaa.queue 这样格式的消息，不接收能 topic.aaaa.bbbb.queue 这样格式的消息</p>\n</blockquote>\n</li>\n</ul>\n<h1 id=\"交换机的类型\"><a href=\"# 交换机的类型\" class=\"headerlink\" title=\"交换机的类型\"></a>交换机的类型</h1><blockquote>\n<ul>\n<li>fanoutExchange : 广播交换机，适用于简单模式、订阅模式、工作队列模式</li>\n<li>directExchange : 路由定向交换机，适用于路由模式</li>\n<li>headersExchange: 头交换机，适用于路由模式, 路由交换机的路由是基于路由键，头交换机的路由值基于消息的 header 数据。</li>\n<li>topicExchange  : 主题交换机，适用于通配符模式</li>\n</ul>\n</blockquote>\n<h1 id=\"SpringBoot 集成 RabbitMQ\"><a href=\"#SpringBoot 集成 RabbitMQ\" class=\"headerlink\" title=\"SpringBoot 集成 RabbitMQ\"></a>SpringBoot 集成 RabbitMQ</h1><h2 id=\"导入依赖\"><a href=\"# 导入依赖\" class=\"headerlink\" title=\"导入依赖\"></a>导入依赖</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"生产端\"><a href=\"# 生产端\" class=\"headerlink\" title=\"生产端\"></a>生产端</h2><blockquote>\n<ul>\n<li>在配置类中配置交换机、消息队列以及它们的绑定关系</li>\n<li>使用 RabbitTemplate 发送消息, 最重要的三个参数是：交换机名称、路由 key、消息数据</li>\n</ul>\n</blockquote>\n<h2 id=\"消费端\"><a href=\"# 消费端\" class=\"headerlink\" title=\"消费端\"></a>消费端</h2><blockquote>\n<ul>\n<li>配置一个 Listener, 使用 @RabbitListener 来自动接收消息并处理，如下代码所示</li>\n</ul>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RabbitMQListener</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@RabbitListener(queues = &quot;bootQueueOne&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">ListenerQueue</span><span class=\"params\">(Message message)</span>&#123;</span><br><span class=\"line\">        System.out.println(message);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","url":"/posts/15185/","min2read":1,"word4post":488,"prev_post":null,"next_post":{"title":"RabbitMQ-Install","url":"/posts/59081/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"架构图\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">架构图</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"工作模式 - 五种\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\"> 工作模式(五种)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"Simple 简单模式\" href = \"#\"><span class=\"toc-number\">2.1.</span> <span class=\"toc-text\">Simple 简单模式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"Work-queues 工作队列模式\" href = \"#\"><span class=\"toc-number\">2.2.</span> <span class=\"toc-text\">Work queues 工作队列模式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"Pub-Sub- 订阅模式\" href = \"#\"><span class=\"toc-number\">2.3.</span> <span class=\"toc-text\">Pub&#x2F;Sub 订阅模式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"Routing 路由模式\" href = \"#\"><span class=\"toc-number\">2.4.</span> <span class=\"toc-text\">Routing 路由模式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"Topic 通配符方式\" href = \"#\"><span class=\"toc-number\">2.5.</span> <span class=\"toc-text\">Topic 通配符方式</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"交换机的类型\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">交换机的类型</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"SpringBoot 集成 RabbitMQ\" href = \"#\"><span class=\"toc-number\">4.</span> <span class=\"toc-text\">SpringBoot 集成 RabbitMQ</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"导入依赖\" href = \"#\"><span class=\"toc-number\">4.1.</span> <span class=\"toc-text\">导入依赖</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"生产端\" href = \"#\"><span class=\"toc-number\">4.2.</span> <span class=\"toc-text\">生产端</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"消费端\" href = \"#\"><span class=\"toc-number\">4.3.</span> <span class=\"toc-text\">消费端</span></a></li></ol></li></ol>","categories":[{"name":"MQ","path":"api/categories/MQ.json","url":"/categories/MQ/"}],"tags":[]}