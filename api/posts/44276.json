{"title":"MQ","slug":"Cloud_MQ","date":"2022-07-26","updated":"2022-07-27","comments":true,"path":"api/posts/44276.json","excerpt":"<blockquote><p> 总结了关于消息中间件 MQ 的知识点 </p></blockquote>","cover":"http://xtzl.wentexl.cn/%E7%BC%96%E7%A0%81API.png","covers":["http://xtzl.wentexl.cn/%E7%BC%96%E7%A0%81API.png","http://xtzl.wentexl.cn/SCS%E6%9E%B6%E6%9E%84%E5%9B%BE2.png"],"content":"<blockquote>\n<p> 总结了关于消息中间件 MQ 的知识点 </p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"核心 - 四大天王\"><a href=\"# 核心 - 四大天王\" class=\"headerlink\" title=\"核心: 四大天王\"></a> 核心: 四大天王 </h1><blockquote>\n<ul>\n<li>RabbitMQ</li>\n<li>RocketMQ</li>\n<li>ActiveMQ</li>\n<li>Kafka</li>\n</ul>\n</blockquote>\n<blockquote>\n<p><strong> 重点 </strong>  </p>\n<ul>\n<li> 凡是涉及到监控、刷新的，必须要引入 actuator 这个依赖 </li>\n<li> 不同的组可以存在重复消费 </li>\n<li> 同一个组不能存在重复消费 </li>\n<li> 不做处理的默认每个接收的实例都是一个组 </li>\n</ul>\n</blockquote>\n<h1 id=\"引入依赖\"><a href=\"# 引入依赖\" class=\"headerlink\" title=\"引入依赖\"></a> 引入依赖 </h1><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 添加消息总线 RabbitMQ 支持 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-bus-amqp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"client 添加 yml 的相关支持\"><a href=\"#client 添加 yml 的相关支持\" class=\"headerlink\" title=\"client 添加 yml 的相关支持\"></a>client 添加 yml 的相关支持 </h1><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#rabbitmq 相关配置 </span></span><br><span class=\"line\"><span class=\"attr\">rabbitmq:</span></span><br><span class=\"line\">  <span class=\"attr\">host:</span> <span class=\"string\">localhost</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">5672</span></span><br><span class=\"line\">  <span class=\"attr\">username:</span> <span class=\"string\">guest</span></span><br><span class=\"line\">  <span class=\"attr\">password:</span> <span class=\"string\">guest</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h1 id=\"只需要发送一次，则 client 端处处生效\"><a href=\"# 只需要发送一次，则 client 端处处生效\" class=\"headerlink\" title=\"只需要发送一次，则 client 端处处生效\"></a> 只需要发送一次，则 client 端处处生效 </h1><blockquote>\n<p><strong> 中心 Config 端 多增加如下配置，include 改为:bus-refresh</strong></p>\n</blockquote>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">##rabbitmq 相关配置, 暴露 bus 刷新配置的端点 </span></span><br><span class=\"line\"><span class=\"attr\">management:</span></span><br><span class=\"line\">  <span class=\"attr\">endpoints:</span> <span class=\"comment\"># 暴露 bus 刷新配置的端点 </span></span><br><span class=\"line\">    <span class=\"attr\">web:</span></span><br><span class=\"line\">      <span class=\"attr\">exposure:</span></span><br><span class=\"line\">        <span class=\"attr\">include:</span> <span class=\"string\">&#x27;bus-refresh&#x27;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"运维发送全体通知和精确通知\"><a href=\"# 运维发送全体通知和精确通知\" class=\"headerlink\" title=\"运维发送全体通知和精确通知\"></a> 运维发送全体通知和精确通知 </h1><blockquote>\n<ul>\n<li> 全体通知：<br>localhost:3344/actuator/bus-refresh<br> 其中，3344 指的是中心 Config 端的端口号 </li>\n</ul>\n<hr>\n<ul>\n<li> 精确通知：<br>localhost:3344/actuator/bus-refresh/config-client:3366<br> 其中，config-client 指的是 config 的服务名称，3366 是实例的端口号 </li>\n</ul>\n<hr>\n</blockquote>\n<h1 id=\"SpringCloud-Stream\"><a href=\"#SpringCloud-Stream\" class=\"headerlink\" title=\"SpringCloud Stream\"></a>SpringCloud Stream</h1><h2 id=\"架构图 1\"><a href=\"# 架构图 1\" class=\"headerlink\" title=\"架构图 1\"></a> 架构图 1</h2><p><img src=\"http://xtzl.wentexl.cn/%E7%BC%96%E7%A0%81API.png\" alt=\"alt\"></p>\n<h2 id=\"架构图 2\"><a href=\"# 架构图 2\" class=\"headerlink\" title=\"架构图 2\"></a> 架构图 2</h2><p><img src=\"http://xtzl.wentexl.cn/SCS%E6%9E%B6%E6%9E%84%E5%9B%BE2.png\" alt=\"alt\"></p>\n","url":"/posts/44276/","min2read":1,"word4post":300,"prev_post":null,"next_post":{"title":"Cloud_Config","url":"/posts/8012/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"核心 - 四大天王\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\"> 核心: 四大天王 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"引入依赖\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\"> 引入依赖 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"client 添加 yml 的相关支持\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">client 添加 yml 的相关支持 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"只需要发送一次，则 client 端处处生效\" href = \"#\"><span class=\"toc-number\">4.</span> <span class=\"toc-text\"> 只需要发送一次，则 client 端处处生效 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"运维发送全体通知和精确通知\" href = \"#\"><span class=\"toc-number\">5.</span> <span class=\"toc-text\"> 运维发送全体通知和精确通知 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"SpringCloud-Stream\" href = \"#\"><span class=\"toc-number\">6.</span> <span class=\"toc-text\">SpringCloud Stream</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"架构图 1\" href = \"#\"><span class=\"toc-number\">6.1.</span> <span class=\"toc-text\"> 架构图 1</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"架构图 2\" href = \"#\"><span class=\"toc-number\">6.2.</span> <span class=\"toc-text\"> 架构图 2</span></a></li></ol></li></ol>","categories":[{"name":"Service_MQ","path":"api/categories/Service_MQ.json","url":"/categories/Service-MQ/"}],"tags":[{"name":"MQ","path":"api/tags/MQ.json","url":"/tags/MQ/"}]}