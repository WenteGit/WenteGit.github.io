{"title":"Online-bug","slug":"Online-bug","date":"2024-01-06","updated":"2024-01-06","comments":true,"path":"api/posts/45986.json","excerpt":"<blockquote><p> 线上 bug 的排查 </p></blockquote>","cover":null,"covers":null,"content":"<blockquote>\n<p>线上 bug 的排查</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"JVM 参数\"><a href=\"#JVM 参数\" class=\"headerlink\" title=\"JVM 参数\"></a>JVM 参数</h1><blockquote>\n<p>打印 GC 日志：  </p>\n<ul>\n<li>XX：+PrintGCDetails</li>\n<li>XX：+UseConcMarkSweepGC<br>堆的最小大小：  </li>\n<li>Xms20m<br>堆的最大大小：  </li>\n<li>Xmx20m<br>当 OutOfMemoryError 发生时自动生成 Heap Dump 文件  </li>\n<li>XX：+HeapDumpOnOutOfMemoryError<br>当 JVM 执行 FullGC 前执行 dump  </li>\n<li>XX：+HeapDumpBeforeFullGC<br>当 JVM 执行 FullGC 后执行 dump    </li>\n<li>XX：+HeapDumpAfterFullGC<br>指定 dump 文件存储路径</li>\n<li>XX：HeapDumpPath=/home/dumps</li>\n</ul>\n</blockquote>\n<h1 id=\"JVM 命令\"><a href=\"#JVM 命令\" class=\"headerlink\" title=\"JVM 命令\"></a>JVM 命令 </h1><h2 id=\"jmap\"><a href=\"#jmap\" class=\"headerlink\" title=\"jmap\"></a>jmap</h2><h3 id=\"解释\"><a href=\"# 解释\" class=\"headerlink\" title=\"解释\"></a> 解释</h3><blockquote>\n<p>使用 jdk 的 jmp 命令导出 dump 文件,format=b 表示文件是二进制文件，file 是指定 dump 文件的下载地址</p>\n</blockquote>\n<h3 id=\"命令\"><a href=\"# 命令\" class=\"headerlink\" title=\"命令\"></a>命令</h3><blockquote>\n<p>jmap -dump:format=b,file=/home/dumps 进程 pid</p>\n</blockquote>\n<h1 id=\"MAT 可视化分析\"><a href=\"#MAT 可视化分析\" class=\"headerlink\" title=\"MAT 可视化分析\"></a>MAT 可视化分析</h1>","url":"/posts/45986/","min2read":"1","word4post":142,"prev_post":null,"next_post":{"title":"vue-knowledge","url":"/posts/52840/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"JVM 参数\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">JVM 参数</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"JVM 命令\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">JVM 命令 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"jmap\" href = \"#\"><span class=\"toc-number\">2.1.</span> <span class=\"toc-text\">jmap</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"解释\" href = \"#\"><span class=\"toc-number\">2.1.1.</span> <span class=\"toc-text\"> 解释</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"命令\" href = \"#\"><span class=\"toc-number\">2.1.2.</span> <span class=\"toc-text\">命令</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"MAT 可视化分析\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">MAT 可视化分析</span></a></li></ol>","categories":[{"name":"online","path":"api/categories/online.json","url":"/categories/online/"}],"tags":[]}