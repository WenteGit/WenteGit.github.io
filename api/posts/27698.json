{"title":"sql_command","slug":"sql-command","date":"2022-10-24","updated":"2022-11-30","comments":true,"path":"api/posts/27698.json","excerpt":"<p> 关于 sqlServer 的一些命令的创建 </p>","cover":null,"covers":null,"content":"<p>关于 sqlServer 的一些命令的创建</p>\n<span id=\"more\"></span>\n<h1 id=\"JavaType-Mapping-SqlType\"><a href=\"#JavaType-Mapping-SqlType\" class=\"headerlink\" title=\"JavaType-Mapping-SqlType\"></a>JavaType-Mapping-SqlType</h1><img src = \"http://xtzl.wentexl.cn/%E6%96%87%E6%A1%A3.png\"> \n\n<h1 id=\"Transact-SQL\"><a href=\"#Transact-SQL\" class=\"headerlink\" title=\"Transact-SQL\"></a>Transact-SQL</h1><h2 id=\"自定义数据类型\"><a href=\"# 自定义数据类型\" class=\"headerlink\" title=\"自定义数据类型\"></a>自定义数据类型 </h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建自定义数据类型</span></span><br><span class=\"line\"><span class=\"number\">1</span>, <span class=\"keyword\">create</span> type</span><br><span class=\"line\"> 例： <span class=\"keyword\">create</span> type goodsNO <span class=\"keyword\">from</span> <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">Not</span> <span class=\"keyword\">NULL</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">2</span>, sp_addtype</span><br><span class=\"line\">例： <span class=\"keyword\">EXEC</span> sp_addtype comment,text,<span class=\"keyword\">NULL</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- EXEC ： 表示执行后面的存储过程 </span></span><br><span class=\"line\"><span class=\"comment\">-- 删除自定义数据类型</span></span><br><span class=\"line\"><span class=\"number\">1</span>, sp_droptype </span><br><span class=\"line\"> 例： <span class=\"keyword\">EXEC</span> sp_droptype goodsNo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查看自定义的 comment 的数据类型的相关信息 </span></span><br><span class=\"line\"><span class=\"number\">2</span>, sp_help</span><br><span class=\"line\"> 例： <span class=\"keyword\">EXEC</span> sp_help comment</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"常量或变量\"><a href=\"# 常量或变量\" class=\"headerlink\" title=\"常量或变量\"></a>常量或变量 </h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 常量</span></span><br><span class=\"line\"> 日期常量：</span><br><span class=\"line\">    <span class=\"string\">&#x27;2/14/2018&#x27;</span>  表示 <span class=\"number\">2018</span> 年 <span class=\"number\">2</span>月 <span class=\"number\">14</span> 日 </span><br><span class=\"line\">    <span class=\"string\">&#x27;2018-1-19&#x27;</span>  表示 <span class=\"number\">2018</span> 年 <span class=\"number\">1</span> 月 <span class=\"number\">19</span> 日 </span><br><span class=\"line\">    <span class=\"string\">&#x27;Mar 8,2018&#x27;</span> 表示 <span class=\"number\">2018</span> 年 <span class=\"number\">3</span> 月  <span class=\"number\">8</span> 日</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 局部变量</span></span><br><span class=\"line\"><span class=\"comment\">-- 定义</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"variable\">@local1</span> <span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"variable\">@local2</span> <span class=\"type\">char</span>(<span class=\"number\">5</span>), <span class=\"variable\">@local3</span> <span class=\"type\">float</span></span><br><span class=\"line\"><span class=\"comment\">-- 赋值</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"variable\">@local1</span> <span class=\"operator\">=</span> <span class=\"number\">56</span> <span class=\"comment\">-- 只可给单个变量赋值</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"variable\">@local2</span> <span class=\"operator\">=</span> <span class=\"string\">&#x27;world&#x27;</span>, <span class=\"variable\">@local3</span> <span class=\"operator\">=</span> <span class=\"string\">&#x27;34.2&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">-- 将 table1 表中 local3 为 local1 的值的数据，赋值给自定义的变量 local2</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"variable\">@local2</span>  <span class=\"operator\">=</span>  local3 <span class=\"keyword\">from</span> table1 <span class=\"keyword\">where</span> local2 <span class=\"operator\">=</span> <span class=\"variable\">@local1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 以文本形式输出</span></span><br><span class=\"line\">print(<span class=\"variable\">@local2</span>)</span><br><span class=\"line\"><span class=\"comment\">-- 以表格形式输出多个变量值</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"variable\">@local2</span>, <span class=\"variable\">@local3</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"流程控制语句\"><a href=\"# 流程控制语句\" class=\"headerlink\" title=\"流程控制语句\"></a>流程控制语句</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- IF 语句</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"variable\">@in</span> <span class=\"type\">decimal</span>(<span class=\"number\">18</span>,<span class=\"number\">2</span>), <span class=\"variable\">@sale</span> <span class=\"type\">decimal</span>(<span class=\"number\">18</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"variable\">@in</span> <span class=\"operator\">=</span> Inprice,<span class=\"variable\">@sale</span> <span class=\"operator\">=</span> SalePrice <span class=\"keyword\">from</span> goods <span class=\"keyword\">where</span> gooodsno <span class=\"operator\">=</span> <span class=\"string\">&#x27;G001&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">IF <span class=\"variable\">@in</span> <span class=\"operator\">&gt;</span> <span class=\"variable\">@sale</span></span><br><span class=\"line\">    print(<span class=\"string\">&#x27;GN001 是打折商品 &#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">else</span> if <span class=\"variable\">@in</span> <span class=\"operator\">=</span> <span class=\"variable\">@sale</span></span><br><span class=\"line\">    print(<span class=\"string\">&#x27; 测试用例 &#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">ELSE</span></span><br><span class=\"line\">    print(<span class=\"string\">&#x27;GN001 是正价商品 &#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- Case 语句</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> expression</span><br><span class=\"line\">    <span class=\"keyword\">when</span> expression1 <span class=\"keyword\">then</span> result1</span><br><span class=\"line\">    <span class=\"keyword\">when</span> expression2 <span class=\"keyword\">then</span> result2</span><br><span class=\"line\">    <span class=\"keyword\">ELSE</span> result3</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"存储类型\"><a href=\"# 存储类型\" class=\"headerlink\" title=\"存储类型\"></a>存储类型</h1><ul>\n<li>varchar(10)，只能存储 10 个英文字符或数字，也只能存储 5 个汉字；</li>\n<li>char(10)，只能存储 10 个英文字符或数字，也只能存储 5 个汉字；</li>\n<li>nvarchar(10)，即存储 10 个英文字符或数字，也能存储 10 个汉字；</li>\n<li>nchar(10)，即存储 10 个英文字符或数字，也能存储 10 个汉字</li>\n</ul>\n<h1 id=\"Date 或者 DateTime 类型的年月日函数\"><a href=\"#Date 或者 DateTime 类型的年月日函数\" class=\"headerlink\" title=\"Date 或者 DateTime 类型的年月日函数\"></a>Date 或者 DateTime 类型的年月日函数</h1><ul>\n<li>year(date)</li>\n<li>month(date)</li>\n<li>day(date)</li>\n<li>datediff(datepart,startdate,enddate): 计算两个时间的差值, 比如：datediff(yy,getdate(),’2008-08-08’) : 表示计算年份的差值</li>\n<li>getdate() 是获取当时时间，类型是 datetime 类型</li>\n</ul>\n<h1 id=\"截取字符串\"><a href=\"# 截取字符串\" class=\"headerlink\" title=\"截取字符串\"></a>截取字符串</h1><ul>\n<li>left(‘abcdefg’,3) , 从左开始截取 3 位</li>\n<li>right(‘asdasd’,4), 从右开始截取 4 位</li>\n<li>substr(‘asdadasd’,2,4) 截取下标 2~3 的字符</li>\n</ul>\n","url":"/posts/27698/","min2read":2,"word4post":522,"prev_post":{"title":"sql_DDL","url":"/posts/56248/"},"next_post":{"title":"JUC","url":"/posts/30559/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"JavaType-Mapping-SqlType\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">JavaType-Mapping-SqlType</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"Transact-SQL\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">Transact-SQL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"自定义数据类型\" href = \"#\"><span class=\"toc-number\">2.1.</span> <span class=\"toc-text\">自定义数据类型 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"常量或变量\" href = \"#\"><span class=\"toc-number\">2.2.</span> <span class=\"toc-text\">常量或变量 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"流程控制语句\" href = \"#\"><span class=\"toc-number\">2.3.</span> <span class=\"toc-text\">流程控制语句</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"存储类型\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">存储类型</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"Date 或者 DateTime 类型的年月日函数\" href = \"#\"><span class=\"toc-number\">4.</span> <span class=\"toc-text\">Date 或者 DateTime 类型的年月日函数</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"截取字符串\" href = \"#\"><span class=\"toc-number\">5.</span> <span class=\"toc-text\">截取字符串</span></a></li></ol>","categories":[{"name":"SQLS","path":"api/categories/SQLS.json","url":"/categories/SQLS/"}],"tags":[]}