{"title":"Cloud_Sleuth","slug":"Cloud_Sleuth","date":"2022-07-23","updated":"2022-07-27","comments":true,"path":"api/posts/49475.json","excerpt":"<blockquote><p> 分布式请求链路跟踪  :<br> 总结了 Springcloud-Sleuth 的相关知识 </p></blockquote>","cover":"http://xtzl.wentexl.cn/Sleuth%E5%9B%BE.png","covers":["http://xtzl.wentexl.cn/Sleuth%E5%9B%BE.png"],"content":"<blockquote>\n<p> 分布式请求链路跟踪  :<br> 总结了 Springcloud-Sleuth 的相关知识 </p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"zipkin\"><a href=\"#zipkin\" class=\"headerlink\" title=\"zipkin\"></a>zipkin</h1><blockquote>\n<ul>\n<li> 安装使用 jar 包，然后直接敲 java -jar xxx.jar 这个命令就好 </li>\n<li> 图形化界面端口号 9411  </li>\n</ul>\n</blockquote>\n<p><strong> 链路图:</strong><br><img src=\"http://xtzl.wentexl.cn/Sleuth%E5%9B%BE.png\" alt=\"链路图\"></p>\n<blockquote>\n<ul>\n<li>span 表示链路来源：通俗来说 span 就是一次请求信息 </li>\n<li>Trance 类似于树结构的 Span 集合，表示一条调用链路，存在唯一标识 </li>\n</ul>\n</blockquote>\n<p><strong> 依赖引入 </strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 包含了 sleuth+zipkin--&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>yml 配置 </strong></p>\n<blockquote>\n<p>yml 解释：</p>\n<ul>\n<li>base-url: 监控的数据需要发到 9411 上去  </li>\n<li> 采样率一般 0.5 就够了，表示只需要一半的数据就好 </li>\n</ul>\n</blockquote>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">    <span class=\"attr\">zipkin:</span></span><br><span class=\"line\">        <span class=\"attr\">base-url:</span> <span class=\"string\">http://localhost:9411</span></span><br><span class=\"line\">    <span class=\"attr\">sleuth:</span></span><br><span class=\"line\">        <span class=\"attr\">sampler:</span></span><br><span class=\"line\">        <span class=\"comment\"># 采样率值介于 0 到 1 之间，1 则表示全部采集 </span></span><br><span class=\"line\">        <span class=\"attr\">probability:</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n","url":"/posts/49475/","min2read":"1","word4post":207,"prev_post":{"title":"Ribbon","url":"/posts/49475/"},"next_post":{"title":"Consul","url":"/posts/29713/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"zipkin\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">zipkin</span></a></li></ol>","categories":[{"name":"Service_Sleuth","path":"api/categories/Service_Sleuth.json","url":"/categories/Service-Sleuth/"}],"tags":[{"name":"Sleuth","path":"api/tags/Sleuth.json","url":"/tags/Sleuth/"}]}