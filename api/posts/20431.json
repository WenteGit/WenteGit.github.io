{"title":"Sqlserver-Grant","slug":"sql-Grant","date":"2022-11-14","updated":"2023-02-25","comments":true,"path":"api/posts/20431.json","excerpt":"<blockquote><p> 总结了关于权限管理的 sql 语句 </p></blockquote>","cover":null,"covers":null,"content":"<blockquote>\n<p> 总结了关于权限管理的 sql 语句 </p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"授予权限\"><a href=\"# 授予权限\" class=\"headerlink\" title=\"授予权限\"></a> 授予权限 </h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 授予 wente 所有权限 </span></span><br><span class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">all</span> privileges <span class=\"keyword\">on</span> goods <span class=\"keyword\">to</span> wente</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 授予 dbuser2 查询和修改 Goods 表的权限 </span></span><br><span class=\"line\"><span class=\"comment\">-- with grant option 表示是否可以把该权限授予其他用户 </span></span><br><span class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">select</span>,<span class=\"keyword\">update</span> <span class=\"keyword\">on</span> Goods <span class=\"keyword\">to</span> dbuser2 <span class=\"keyword\">with</span> <span class=\"keyword\">grant</span> option</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 授予 dbuser2 创建表和视图的权限 </span></span><br><span class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span>,<span class=\"keyword\">create</span> <span class=\"keyword\">view</span> <span class=\"keyword\">to</span> dbuser2</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"禁止权限\"><a href=\"# 禁止权限\" class=\"headerlink\" title=\"禁止权限\"></a> 禁止权限 </h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 禁止 guest 用户对 Goods 表进行 crud 的操作 </span></span><br><span class=\"line\">deny <span class=\"keyword\">select</span>,<span class=\"keyword\">insert</span>,<span class=\"keyword\">update</span>, <span class=\"keyword\">delete</span> <span class=\"keyword\">on</span> Goods <span class=\"keyword\">to</span> guest</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"撤销权限\"><a href=\"# 撤销权限\" class=\"headerlink\" title=\"撤销权限\"></a> 撤销权限 </h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 撤销 dbuser2 对 Goods 表的查询和更新的权限 </span></span><br><span class=\"line\"><span class=\"keyword\">revoke</span> <span class=\"keyword\">select</span>,<span class=\"keyword\">update</span> <span class=\"keyword\">on</span> Goods <span class=\"keyword\">from</span> dbuser2</span><br></pre></td></tr></table></figure>\n<h1 id=\"查询权限信息\"><a href=\"# 查询权限信息\" class=\"headerlink\" title=\"查询权限信息\"></a> 查询权限信息 </h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查看用户名为 dbuser2 所拥有的权限 </span></span><br><span class=\"line\"><span class=\"keyword\">Execute</span> sp_helprotect <span class=\"variable\">@username</span> <span class=\"operator\">=</span> <span class=\"string\">&#x27;dbuser2&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 查询获得某个权限的用户信息 </span></span><br><span class=\"line\"><span class=\"keyword\">Execute</span> sp_helprotect <span class=\"variable\">@name</span> <span class=\"operator\">=</span> <span class=\"string\">&#x27;create view&#x27;</span></span><br></pre></td></tr></table></figure>\n","url":"/posts/20431/","min2read":"1","word4post":194,"prev_post":{"title":"C-open-write","url":"/posts/22783/"},"next_post":{"title":"Caffeine","url":"/posts/46615/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"授予权限\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\"> 授予权限 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"禁止权限\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\"> 禁止权限 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"撤销权限\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\"> 撤销权限 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"查询权限信息\" href = \"#\"><span class=\"toc-number\">4.</span> <span class=\"toc-text\"> 查询权限信息 </span></a></li></ol>","categories":[{"name":"DataBase","path":"api/categories/DataBase.json","url":"/categories/DataBase/"}],"tags":[{"name":"sqls","path":"api/tags/sqls.json","url":"/tags/sqls/"}]}