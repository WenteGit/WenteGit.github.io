{"title":"TechStack-SpringMail","slug":"TechStack-SpringMail","date":"2023-01-03","updated":"2023-01-04","comments":true,"path":"api/posts/31627.json","excerpt":"<blockquote><p> 总结了关于 SpringBoot 集成发送邮件的服务，主要用于做邮件认证码 </p></blockquote>","cover":null,"covers":null,"content":"<blockquote>\n<p> 总结了关于 SpringBoot 集成发送邮件的服务，主要用于做邮件认证码 </p>\n</blockquote>\n<span id=\"more\"></span>\n<blockquote>\n<p> 前提准备是在 QQ 邮箱开启 SMTP 服务 (简单邮件传输协议)</p>\n</blockquote>\n<h1 id=\"导入依赖\"><a href=\"# 导入依赖\" class=\"headerlink\" title=\"导入依赖\"></a> 导入依赖 </h1><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-mail<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"yml 配置\"><a href=\"#yml 配置\" class=\"headerlink\" title=\"yml 配置\"></a>yml 配置 </h1><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"comment\"># 邮箱验证码配置 </span></span><br><span class=\"line\">  <span class=\"attr\">mail:</span></span><br><span class=\"line\">    <span class=\"comment\">#smtp 服务主机  qq 邮箱则为 smtp.qq.com;163 邮箱是 smtp.163.com</span></span><br><span class=\"line\">    <span class=\"attr\">host:</span> <span class=\"string\">smtp.qq.com</span></span><br><span class=\"line\">    <span class=\"comment\"># 服务协议 </span></span><br><span class=\"line\">    <span class=\"attr\">protocol:</span> <span class=\"string\">smtp</span></span><br><span class=\"line\">    <span class=\"comment\"># 编码集 </span></span><br><span class=\"line\">    <span class=\"attr\">default-encoding:</span> <span class=\"string\">UTF-8</span></span><br><span class=\"line\">    <span class=\"comment\"># 发送邮件的账户 </span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"number\">123456789</span><span class=\"string\">@qq.com</span></span><br><span class=\"line\">    <span class=\"comment\"># 授权码 </span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">wpsbapnfmsbocece</span></span><br><span class=\"line\">    <span class=\"attr\">test-connection:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">properties:</span></span><br><span class=\"line\">      <span class=\"attr\">mail:</span></span><br><span class=\"line\">        <span class=\"attr\">smtp:</span></span><br><span class=\"line\">          <span class=\"attr\">auth:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">          <span class=\"attr\">starttls:</span></span><br><span class=\"line\">            <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attr\">required:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"具体操作\"><a href=\"# 具体操作\" class=\"headerlink\" title=\"具体操作\"></a> 具体操作 </h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Resource</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> JavaMailSender javaMailSender;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">loginAuthCodeBySendMails</span><span class=\"params\">(String username)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 验证码自己写代码随机生成 </span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">authCode</span> <span class=\"operator\">=</span> sb.toString();</span><br><span class=\"line\">    <span class=\"comment\">// 设置邮件内容 </span></span><br><span class=\"line\">    <span class=\"type\">MimeMessage</span> <span class=\"variable\">mimeMessage</span> <span class=\"operator\">=</span> javaMailSender.createMimeMessage();</span><br><span class=\"line\">    <span class=\"type\">MimeMessageHelper</span> <span class=\"variable\">helper</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MimeMessageHelper</span>(mimeMessage, <span class=\"literal\">true</span>,<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">    helper.setSubject(<span class=\"string\">&quot; 您的验证码为:&quot;</span>+authCode);</span><br><span class=\"line\">    helper.setText(<span class=\"string\">&quot; 您好！欢迎登录校疫通管理系统。您的验证码为：&quot;</span>+<span class=\"string\">&quot;&lt;h1&gt;&quot;</span>+authCode+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>+<span class=\"string\">&quot; 请勿将验证码告诉他人！验证码将在 3 分钟内失效，请尽快输入！&quot;</span>);</span><br><span class=\"line\">    helper.setTo(targetMail);</span><br><span class=\"line\">    helper.setFrom(<span class=\"string\">&quot;393815277@qq.com&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 发送邮件 </span></span><br><span class=\"line\">    javaMailSender.send(mimeMessage);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","url":"/posts/31627/","min2read":1,"word4post":296,"prev_post":{"title":"boot-Configure","url":"/posts/36638/"},"next_post":{"title":"JavaSE","url":"/posts/14085/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"导入依赖\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\"> 导入依赖 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"yml 配置\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">yml 配置 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"具体操作\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\"> 具体操作 </span></a></li></ol>","categories":[{"name":"TechStack","path":"api/categories/TechStack.json","url":"/categories/TechStack/"}],"tags":[]}