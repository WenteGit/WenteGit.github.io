{"title":"Sqlserver_DDL","slug":"sql-DDL","date":"2022-10-30","updated":"2023-02-25","comments":true,"path":"api/posts/56248.json","excerpt":"<blockquote><p> 关键数据定义语言的 sql 语句 </p></blockquote>","cover":null,"covers":null,"content":"<blockquote>\n<p> 关键数据定义语言的 sql 语句 </p>\n</blockquote>\n<span id=\"more\"></span>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> database sqlserverdatabase;</span><br><span class=\"line\">use sqlserverdatabase;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 货品表 </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> Goods(</span><br><span class=\"line\">\tGoodsNo <span class=\"type\">varchar</span>(<span class=\"number\">15</span>) <span class=\"keyword\">primary</span> key,</span><br><span class=\"line\">\tSupplierNO <span class=\"type\">char</span>(<span class=\"number\">6</span>),</span><br><span class=\"line\">\tCategoryNO <span class=\"type\">varchar</span>(<span class=\"number\">15</span>),</span><br><span class=\"line\">\tGoodsName <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">\t<span class=\"comment\">-- 六位数，保留一位小数 </span></span><br><span class=\"line\">\tInPrice\t<span class=\"type\">decimal</span>(<span class=\"number\">6</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\tSalePrice <span class=\"type\">decimal</span>(<span class=\"number\">6</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\tNumber <span class=\"type\">int</span>,</span><br><span class=\"line\">\tProductTime <span class=\"type\">date</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 增加保质期属性列 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Goods <span class=\"keyword\">add</span> QGperiod <span class=\"type\">int</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 修改 Goods 表“进价”属性列为精确数值型，总共七位，保留一位小数。</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Goods <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span> InPrice <span class=\"type\">decimal</span>(<span class=\"number\">7</span>,<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"comment\">-- CategoryNO 为外码，对 Category 表的主键 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Goods <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> outsidecode <span class=\"keyword\">foreign</span> key(CategoryNO) <span class=\"keyword\">references</span> Category(CategoryNO);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除外键 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Gooos <span class=\"keyword\">drop</span> <span class=\"keyword\">foreign</span> key outsidecode</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> Goods;</span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> Goods;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 学生表 </span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"comment\">/* Table: Student                                               */</span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> Student (</span><br><span class=\"line\">   SNO                  <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)                  <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   SName                <span class=\"type\">varchar</span>(<span class=\"number\">10</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   BirthYear            <span class=\"type\">int</span>                  <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   Gender               <span class=\"type\">char</span>(<span class=\"number\">1</span>)              <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   College              <span class=\"type\">varchar</span>(<span class=\"number\">10</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   Major                <span class=\"type\">varchar</span>(<span class=\"number\">10</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   WeiXin               <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)          <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   <span class=\"comment\">-- 添加主键约束 </span></span><br><span class=\"line\">   <span class=\"keyword\">constraint</span> PK_STUDENT <span class=\"keyword\">primary</span> key (SNO)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 添加 WeiXin 唯一值约束 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Student <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> WeixinUnique <span class=\"keyword\">unique</span>(WeiXin);</span><br><span class=\"line\"><span class=\"comment\">-- 添加 check 约束 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Student <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> mycheckN <span class=\"keyword\">check</span>(Gender <span class=\"operator\">=</span> <span class=\"string\">&#x27; 男 &#x27;</span> <span class=\"keyword\">or</span> Gender <span class=\"operator\">=</span> <span class=\"string\">&#x27; 女 &#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">-- 删除 student 表中的出生年份这一列 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Student <span class=\"keyword\">drop</span> <span class=\"keyword\">column</span> BirthYear;</span><br><span class=\"line\"><span class=\"comment\">-- 删除表 student 的唯一值约束 </span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> Student <span class=\"keyword\">drop</span> WeixinUnique;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> Student;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 销售表 </span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> SaleBill;</span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"comment\">/* Table: SaleBill                                              */</span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> SaleBill (</span><br><span class=\"line\">   GoodsNO              <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)              <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   SNO                  <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)                  <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   HappenTime           <span class=\"type\">date</span>                 <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   Number               <span class=\"type\">int</span>                  <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   <span class=\"keyword\">constraint</span> PK_SALEBILL <span class=\"keyword\">primary</span> key (GoodsNO,SNO)</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">-- 在表 SaleBill 上增加数量大于 0 的约束。</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> SaleBill <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> numlimit <span class=\"keyword\">check</span>(Number <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 将表 SaleBill 上数量的约束修改为 0~100。</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> SaleBill <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> changedlimit <span class=\"keyword\">check</span>(Number <span class=\"operator\">&gt;=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> Number <span class=\"operator\">&lt;=</span><span class=\"number\">100</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 商品种类表 </span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"comment\">/* Table: CategoryNO                                            */</span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> Category (</span><br><span class=\"line\">   CategoryNO           <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)          <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   CategoryName         <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   Descriptions         <span class=\"type\">varchar</span>(<span class=\"number\">100</span>)         <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   <span class=\"keyword\">constraint</span> PK_CATEGORYNO <span class=\"keyword\">primary</span> key (CategoryNO)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 在 Category 表上，按商品类别编号属性列升序 和 商品类别名属性降序建立唯一值索引。</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">unique</span> nonclustered index indexMO <span class=\"keyword\">on</span> Category(CategoryNO <span class=\"keyword\">ASC</span>,CategoryName <span class=\"keyword\">DESC</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 供应商表 </span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"comment\">/* Table: Supplier                                              */</span></span><br><span class=\"line\"><span class=\"comment\">/*==============================================================*/</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> Supplier (</span><br><span class=\"line\">   SupplierNO           <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)          <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   SupplierName         <span class=\"type\">varchar</span>(<span class=\"number\">15</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   Address              <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   TelNumber               <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)          <span class=\"keyword\">null</span>,</span><br><span class=\"line\">   <span class=\"keyword\">constraint</span> PK_SUPPLIER <span class=\"keyword\">primary</span> key (SupplierNO)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 在表 supplier 表上，按供应商号 属性列的唯一值方式建立索引。</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">unique</span> nonclustered index indexNO <span class=\"keyword\">on</span> Supplier(SupplierNO <span class=\"keyword\">ASC</span>); </span><br><span class=\"line\"><span class=\"comment\">-- 删除 supplier 上的唯一值索引。</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> index indexNO <span class=\"keyword\">on</span> Supplier;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","url":"/posts/56248/","min2read":2,"word4post":501,"prev_post":{"title":"Sqlserver_DML","url":"/posts/35774/"},"next_post":{"title":"Sqlserver_command","url":"/posts/27698/"},"toc":"","categories":[{"name":"DataBase","path":"api/categories/DataBase.json","url":"/categories/DataBase/"}],"tags":[]}